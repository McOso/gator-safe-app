import { PermissionResponse, PermissionTypes, PermissionRequest, Hex } from '@metamask/7715-permission-types';
import { Client, Transport, Chain, Account, RpcSchema, Address, SendTransactionRequest, SendTransactionParameters, Hex as Hex$1, OneOf, PublicClient, WalletClient } from 'viem';
import { SmartAccount, SendUserOperationParameters } from 'viem/account-abstraction';
import { m as Call, S as SmartAccountsEnvironment, D as Delegation } from './types-B9GE5CfG.js';
import { U as UserOperationV07 } from './userOp-DKgjzz7B.js';

type SupportedPermissionInfo = {
    chainIds: `0x${string}`[];
    ruleTypes: string[];
};
type GetSupportedExecutionPermissionsResult = Record<string, SupportedPermissionInfo>;
type GetGrantedExecutionPermissionsResult = PermissionResponse<PermissionTypes>[];
type MetaMaskExtensionSchema = RpcSchema & [
    {
        Method: 'wallet_requestExecutionPermissions';
        Params: PermissionRequest<PermissionTypes>[];
        ReturnType: PermissionResponse<PermissionTypes>[];
    },
    {
        Method: 'wallet_getSupportedExecutionPermissions';
        Params: [];
        ReturnType: GetSupportedExecutionPermissionsResult;
    },
    {
        Method: 'wallet_getGrantedExecutionPermissions';
        Params: [];
        ReturnType: GetGrantedExecutionPermissionsResult;
    }
];
type MetaMaskExtensionClient = Client<Transport, Chain | undefined, Account | undefined, MetaMaskExtensionSchema>;

type PermissionParameter = {
    type: string;
    data: Record<string, unknown>;
};
type NativeTokenStreamPermissionParameter = PermissionParameter & {
    type: 'native-token-stream';
    data: {
        amountPerSecond: bigint;
        initialAmount?: bigint;
        maxAmount?: bigint;
        startTime?: number;
        justification?: string;
    };
};
type Erc20TokenStreamPermissionParameter = PermissionParameter & {
    type: 'erc20-token-stream';
    data: {
        tokenAddress: Address;
        amountPerSecond: bigint;
        initialAmount?: bigint;
        maxAmount?: bigint;
        startTime?: number;
        justification?: string;
    };
};
type NativeTokenPeriodicPermissionParameter = PermissionParameter & {
    type: 'native-token-periodic';
    data: {
        periodAmount: bigint;
        periodDuration: number;
        startTime?: number;
        justification?: string;
    };
};
type Erc20TokenPeriodicPermissionParameter = PermissionParameter & {
    type: 'erc20-token-periodic';
    data: {
        tokenAddress: Address;
        periodAmount: bigint;
        periodDuration: number;
        startTime?: number;
        justification?: string;
    };
};
type Erc20TokenRevocationPermissionParameter = PermissionParameter & {
    type: 'erc20-token-revocation';
    data: {
        justification?: string;
    };
};
type SupportedPermissionParams = NativeTokenStreamPermissionParameter | Erc20TokenStreamPermissionParameter | NativeTokenPeriodicPermissionParameter | Erc20TokenPeriodicPermissionParameter | Erc20TokenRevocationPermissionParameter;
type PermissionRequestParameter = {
    chainId: number;
    permission: SupportedPermissionParams;
    isAdjustmentAllowed: boolean;
    to: Hex;
    from?: Address | undefined | null;
    expiry?: number | undefined | null;
};
type RequestExecutionPermissionsParameters = PermissionRequestParameter[];
type RequestExecutionPermissionsReturnType = PermissionResponse<PermissionTypes>[];
declare function erc7715RequestExecutionPermissionsAction(client: MetaMaskExtensionClient, parameters: RequestExecutionPermissionsParameters): Promise<RequestExecutionPermissionsReturnType>;

type DelegatedCall = Call & OneOf<{
    permissionsContext: Hex$1;
    delegationManager: Hex$1;
} | object>;
type SendTransactionWithDelegationParameters<TChain extends Chain | undefined = Chain | undefined, TAccount extends Account | undefined = Account | undefined, TChainOverride extends Chain | undefined = Chain | undefined, TRequest extends SendTransactionRequest<TChain, TChainOverride> = SendTransactionRequest<TChain, TChainOverride>> = SendTransactionParameters<TChain, TAccount, TChainOverride, TRequest> & {
    permissionsContext: Hex$1;
    delegationManager: Hex$1;
};
type SendUserOperationWithDelegationParameters<TAccount extends SmartAccount | undefined = SmartAccount | undefined, TAccountOverride extends SmartAccount | undefined = SmartAccount | undefined> = SendUserOperationParameters<TAccount, TAccountOverride, DelegatedCall[]> & {
    accountMetadata?: {
        factory: Hex$1;
        factoryData: Hex$1;
    }[];
    calls: DelegatedCall[];
    publicClient: PublicClient<Transport, Chain>;
};

type CaveatEnforcerParams = {
    delegation: Delegation;
};
type PeriodTransferResult = {
    availableAmount: bigint;
    isNewPeriod: boolean;
    currentPeriod: bigint;
};
type StreamingResult = {
    availableAmount: bigint;
};
declare function getErc20PeriodTransferEnforcerAvailableAmount(client: Client, environment: SmartAccountsEnvironment, params: CaveatEnforcerParams): Promise<PeriodTransferResult>;
declare function getErc20StreamingEnforcerAvailableAmount(client: Client, environment: SmartAccountsEnvironment, params: CaveatEnforcerParams): Promise<StreamingResult>;
declare function getMultiTokenPeriodEnforcerAvailableAmount(client: Client, environment: SmartAccountsEnvironment, params: CaveatEnforcerParams): Promise<PeriodTransferResult>;
declare function getNativeTokenPeriodTransferEnforcerAvailableAmount(client: Client, environment: SmartAccountsEnvironment, params: CaveatEnforcerParams): Promise<PeriodTransferResult>;
declare function getNativeTokenStreamingEnforcerAvailableAmount(client: Client, environment: SmartAccountsEnvironment, params: CaveatEnforcerParams): Promise<StreamingResult>;
declare const caveatEnforcerActions: ({ environment }: {
    environment: SmartAccountsEnvironment;
}) => (client: Client) => {
    getErc20PeriodTransferEnforcerAvailableAmount: (params: CaveatEnforcerParams) => Promise<PeriodTransferResult>;
    getErc20StreamingEnforcerAvailableAmount: (params: CaveatEnforcerParams) => Promise<StreamingResult>;
    getMultiTokenPeriodEnforcerAvailableAmount: (params: CaveatEnforcerParams) => Promise<PeriodTransferResult>;
    getNativeTokenPeriodTransferEnforcerAvailableAmount: (params: CaveatEnforcerParams) => Promise<PeriodTransferResult>;
    getNativeTokenStreamingEnforcerAvailableAmount: (params: CaveatEnforcerParams) => Promise<StreamingResult>;
};

type IsValid7702ImplementationParameters = {
    client: Client;
    accountAddress: Address;
    environment: SmartAccountsEnvironment;
};
declare function isValid7702Implementation({ client, accountAddress, environment, }: IsValid7702ImplementationParameters): Promise<boolean>;

type SignDelegationParameters = {
    account?: Account | Address;
    delegation: Omit<Delegation, 'signature'>;
    delegationManager: Address;
    chainId: number;
    name?: string;
    version?: string;
    allowInsecureUnrestrictedDelegation?: boolean;
};
type SignDelegationReturnType = Hex$1;
declare function signDelegation<TChain extends Chain | undefined, TAccount extends Account | undefined>(client: Client<Transport, TChain, TAccount> & {
    signTypedData: WalletClient['signTypedData'];
}, parameters: SignDelegationParameters): Promise<SignDelegationReturnType>;
declare function signDelegationActions(): <TChain extends Chain | undefined, TAccount extends Account | undefined>(client: Client<Transport, TChain, TAccount> & {
    signTypedData: WalletClient["signTypedData"];
}) => {
    signDelegation: (parameters: Omit<SignDelegationParameters, "chainId"> & {
        chainId?: number;
    }) => Promise<`0x${string}`>;
};

type SignUserOperationParameters = {
    account?: Account | Address;
    userOperation: Omit<UserOperationV07, 'signature'>;
    entryPoint: {
        address: Address;
    };
    chainId: number;
    address: Address;
    name: 'HybridDeleGator' | 'MultiSigDeleGator';
    version?: string;
};
type SignUserOperationReturnType = Hex$1;
declare function signUserOperation<TChain extends Chain | undefined, TAccount extends Account | undefined>(client: Client<Transport, TChain, TAccount> & {
    signTypedData: WalletClient['signTypedData'];
}, parameters: SignUserOperationParameters): Promise<SignUserOperationReturnType>;
declare function signUserOperationActions(): <TChain extends Chain | undefined, TAccount extends Account | undefined>(client: Client<Transport, TChain, TAccount> & {
    signTypedData: WalletClient["signTypedData"];
}) => {
    signUserOperation: (parameters: Omit<SignUserOperationParameters, "chainId"> & {
        chainId?: number;
    }) => Promise<`0x${string}`>;
};

declare function erc7715GetSupportedExecutionPermissionsAction(client: MetaMaskExtensionClient): Promise<GetSupportedExecutionPermissionsResult>;

declare function erc7715GetGrantedExecutionPermissionsAction(client: MetaMaskExtensionClient): Promise<GetGrantedExecutionPermissionsResult>;

declare const erc7715ProviderActions: () => (client: Client) => {
    requestExecutionPermissions: (parameters: RequestExecutionPermissionsParameters) => Promise<RequestExecutionPermissionsReturnType>;
    getSupportedExecutionPermissions: () => Promise<GetSupportedExecutionPermissionsResult>;
    getGrantedExecutionPermissions: () => Promise<GetGrantedExecutionPermissionsResult>;
};
type Erc7715Client = Client & ReturnType<ReturnType<typeof erc7715ProviderActions>>;
declare const erc7710WalletActions: () => (client: WalletClient) => {
    sendTransactionWithDelegation: (args: SendTransactionWithDelegationParameters) => Promise<`0x${string}`>;
};
declare const erc7710BundlerActions: () => (client: Client) => {
    sendUserOperationWithDelegation: (args: SendUserOperationWithDelegationParameters) => Promise<`0x${string}`>;
};

type index_CaveatEnforcerParams = CaveatEnforcerParams;
type index_DelegatedCall = DelegatedCall;
type index_Erc7715Client = Erc7715Client;
type index_GetGrantedExecutionPermissionsResult = GetGrantedExecutionPermissionsResult;
type index_GetSupportedExecutionPermissionsResult = GetSupportedExecutionPermissionsResult;
type index_MetaMaskExtensionClient = MetaMaskExtensionClient;
type index_MetaMaskExtensionSchema = MetaMaskExtensionSchema;
type index_PeriodTransferResult = PeriodTransferResult;
type index_PermissionRequestParameter = PermissionRequestParameter;
type index_RequestExecutionPermissionsParameters = RequestExecutionPermissionsParameters;
type index_RequestExecutionPermissionsReturnType = RequestExecutionPermissionsReturnType;
type index_SignDelegationParameters = SignDelegationParameters;
type index_SignDelegationReturnType = SignDelegationReturnType;
type index_SignUserOperationParameters = SignUserOperationParameters;
type index_SignUserOperationReturnType = SignUserOperationReturnType;
type index_StreamingResult = StreamingResult;
type index_SupportedPermissionInfo = SupportedPermissionInfo;
declare const index_caveatEnforcerActions: typeof caveatEnforcerActions;
declare const index_erc7710BundlerActions: typeof erc7710BundlerActions;
declare const index_erc7710WalletActions: typeof erc7710WalletActions;
declare const index_erc7715ProviderActions: typeof erc7715ProviderActions;
declare const index_getErc20PeriodTransferEnforcerAvailableAmount: typeof getErc20PeriodTransferEnforcerAvailableAmount;
declare const index_getErc20StreamingEnforcerAvailableAmount: typeof getErc20StreamingEnforcerAvailableAmount;
declare const index_getMultiTokenPeriodEnforcerAvailableAmount: typeof getMultiTokenPeriodEnforcerAvailableAmount;
declare const index_getNativeTokenPeriodTransferEnforcerAvailableAmount: typeof getNativeTokenPeriodTransferEnforcerAvailableAmount;
declare const index_getNativeTokenStreamingEnforcerAvailableAmount: typeof getNativeTokenStreamingEnforcerAvailableAmount;
declare const index_isValid7702Implementation: typeof isValid7702Implementation;
declare const index_signDelegation: typeof signDelegation;
declare const index_signDelegationActions: typeof signDelegationActions;
declare const index_signUserOperation: typeof signUserOperation;
declare const index_signUserOperationActions: typeof signUserOperationActions;
declare namespace index {
  export { type index_CaveatEnforcerParams as CaveatEnforcerParams, type index_DelegatedCall as DelegatedCall, type index_Erc7715Client as Erc7715Client, type index_GetGrantedExecutionPermissionsResult as GetGrantedExecutionPermissionsResult, type index_GetSupportedExecutionPermissionsResult as GetSupportedExecutionPermissionsResult, type index_MetaMaskExtensionClient as MetaMaskExtensionClient, type index_MetaMaskExtensionSchema as MetaMaskExtensionSchema, type index_PeriodTransferResult as PeriodTransferResult, type index_PermissionRequestParameter as PermissionRequestParameter, type index_RequestExecutionPermissionsParameters as RequestExecutionPermissionsParameters, type index_RequestExecutionPermissionsReturnType as RequestExecutionPermissionsReturnType, type index_SignDelegationParameters as SignDelegationParameters, type index_SignDelegationReturnType as SignDelegationReturnType, type index_SignUserOperationParameters as SignUserOperationParameters, type index_SignUserOperationReturnType as SignUserOperationReturnType, type index_StreamingResult as StreamingResult, type index_SupportedPermissionInfo as SupportedPermissionInfo, index_caveatEnforcerActions as caveatEnforcerActions, index_erc7710BundlerActions as erc7710BundlerActions, index_erc7710WalletActions as erc7710WalletActions, index_erc7715ProviderActions as erc7715ProviderActions, index_getErc20PeriodTransferEnforcerAvailableAmount as getErc20PeriodTransferEnforcerAvailableAmount, index_getErc20StreamingEnforcerAvailableAmount as getErc20StreamingEnforcerAvailableAmount, erc7715GetGrantedExecutionPermissionsAction as getGrantedExecutionPermissions, index_getMultiTokenPeriodEnforcerAvailableAmount as getMultiTokenPeriodEnforcerAvailableAmount, index_getNativeTokenPeriodTransferEnforcerAvailableAmount as getNativeTokenPeriodTransferEnforcerAvailableAmount, index_getNativeTokenStreamingEnforcerAvailableAmount as getNativeTokenStreamingEnforcerAvailableAmount, erc7715GetSupportedExecutionPermissionsAction as getSupportedExecutionPermissions, index_isValid7702Implementation as isValid7702Implementation, erc7715RequestExecutionPermissionsAction as requestExecutionPermissions, index_signDelegation as signDelegation, index_signDelegationActions as signDelegationActions, index_signUserOperation as signUserOperation, index_signUserOperationActions as signUserOperationActions };
}

export { type SupportedPermissionInfo as A, type CaveatEnforcerParams as C, type DelegatedCall as D, type Erc7715Client as E, type GetSupportedExecutionPermissionsResult as G, type MetaMaskExtensionClient as M, type PeriodTransferResult as P, type RequestExecutionPermissionsParameters as R, type StreamingResult as S, erc7710WalletActions as a, erc7710BundlerActions as b, caveatEnforcerActions as c, getErc20StreamingEnforcerAvailableAmount as d, erc7715ProviderActions as e, getMultiTokenPeriodEnforcerAvailableAmount as f, getErc20PeriodTransferEnforcerAvailableAmount as g, getNativeTokenPeriodTransferEnforcerAvailableAmount as h, index as i, getNativeTokenStreamingEnforcerAvailableAmount as j, isValid7702Implementation as k, signDelegationActions as l, type SignDelegationParameters as m, type SignDelegationReturnType as n, signUserOperation as o, signUserOperationActions as p, type SignUserOperationParameters as q, type SignUserOperationReturnType as r, signDelegation as s, erc7715RequestExecutionPermissionsAction as t, type MetaMaskExtensionSchema as u, type PermissionRequestParameter as v, type RequestExecutionPermissionsReturnType as w, erc7715GetSupportedExecutionPermissionsAction as x, erc7715GetGrantedExecutionPermissionsAction as y, type GetGrantedExecutionPermissionsResult as z };
